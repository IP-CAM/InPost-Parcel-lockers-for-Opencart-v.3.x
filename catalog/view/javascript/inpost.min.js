$(document).ajaxComplete(function(){function f(){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(a){d(a.coords.latitude,a.coords.longitude,12)});else{var a=document.getElementById("inpost-google-map"),b=a.getAttribute("data-lat"),e=a.getAttribute("data-lng"),a=a.getAttribute("data-zoom");d(b,e,a);console.error("Geolocation is not supported by this browser.")}}function g(){var a=$.Deferred();$.getJSON("/index.php?route=api/inpost/index",{postcode:"",city:""}).done(function(b){a.resolve({data:b.data})});
return a}function d(a,b,e){document.getElementById("inpost-google-map").getAttribute("data-content");a={scrollwheel:!1,navigationControl:!0,mapTypeControl:!1,scaleControl:!0,draggable:!0,zoomControl:!0,zoom:parseInt(e),center:new google.maps.LatLng(a,b),mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("inpost-google-map"),a);var c,d=new google.maps.InfoWindow;g().done(function(a){console.log(a);$.each(a.data,function(a,b){c=new google.maps.Marker({map:map,position:new google.maps.LatLng(b.lat,
b.lng)});google.maps.event.clearListeners(c,"idle");google.maps.event.addListener(c,"click",function(a,b,c){return function(){$("#inpost-google-map");c.setContent('<div class="iw-map-container text-left"><p class="text-left"><b>'+b.description+"</b><br/>"+b.street+"<br/>"+b.postcode+" "+b.city+'</p></div><a target="_blank" href="http://maps.google.com/maps?daddr='+b.lat+",%20"+b.lng+'&ll="class="btn btn-default btn-sm" type="button"><i class="fa fa-map-marker"></i> poka\u017c na mapie</a>');c.open(map,
a)}}(c,b,d))})})}$("#inpostModalMap").off().on("shown.bs.modal",function(){console.log("Otwarto okno, \u0142adowanie mapy google");f()})});
