function btnSelectPoint(a,d){$("#inpostModalMap").modal("hide");setTimeout(function(){$("#inpostModalMap").after('<div class="radio"><label><input type="radio" name="shipping_method" value="inpost.inpost_'+a+'" checked="checked">'+a+" - "+d+"</label></div>");$.ajax({url:"/index.php?route=api/inpost/setData",type:"POST",data:{id:a},error:function(c){c.responseText&&console.error(c.responseText)},success:function(c){console.log(c)}})},1E3)}
$(document).ajaxComplete(function(){function a(){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(b){c(b.coords.latitude,b.coords.longitude,14)});else{var b=document.getElementById("inpost-google-map"),a=b.getAttribute("data-lat"),d=b.getAttribute("data-lng"),b=b.getAttribute("data-zoom");c(a,d,b);console.error("Geolocation is not supported by this browser.")}}function d(){var b=$.Deferred();$.getJSON("/index.php?route=api/inpost/index",{postcode:"",city:""}).done(function(a){b.resolve({data:a.data})});
return b}function c(b,a,c){document.getElementById("inpost-google-map").getAttribute("data-content");b={scrollwheel:!1,navigationControl:!0,mapTypeControl:!1,scaleControl:!0,draggable:!0,zoomControl:!0,zoom:parseInt(c),center:new google.maps.LatLng(b,a),mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("inpost-google-map"),b);var e,f=new google.maps.InfoWindow;d().done(function(b){console.log(b);$.each(b.data,function(b,a){e=new google.maps.Marker({map:map,position:new google.maps.LatLng(a.lat,
a.lng)});google.maps.event.clearListeners(e,"idle");google.maps.event.addListener(e,"click",function(b,a,c){return function(){$("#inpost-google-map");c.setContent('<div class="iw-map-container text-left"><p class="text-left"><b>'+a.description+"</b><br/>"+a.street+"<br/>"+a.postcode+" "+a.city+'</p></div><button type="button" onclick="btnSelectPoint(\''+a.id+"', '"+a.street+", "+a.city+'\');" class="btn btn-default btn-sm"><i class="fa fa-check"></i> wybierz ten paczkomat</button>');c.open(map,b)}}(e,
a,f))})})}$("#inpostModalMap").off().on("shown.bs.modal",function(){console.log("Otwarto okno, \u0142adowanie mapy google");a()})});
